<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8" />
    <title>å¯’é£Ÿå¸–å­—å›¾å±•ç¤º</title>
    <link rel="stylesheet" href="js/styles.css">
    <link rel="shortcut icon" href="hanshi_128x128.ico">
    <style>
        .background {
            width: 100vw;
            overflow: hidden;
            display: block;
            /* æ”¹ä¸º blockï¼Œé¿å… flex æ’‘å¼€å­å…ƒç´  */
            justify-content: flex-start;
            align-items: flex-start;
            padding: 0;
            margin: 0;

        }


        .image-wrapper {
            position: relative;
            /* å…³é”®ï¼šè®© box ä»¥å›¾åƒä¸ºå‚è€ƒå®šä½ */
            width: 100vw;
            max-width: 100vw;
            overflow-x: auto;
            overflow-y: hidden;
            display: flex;
            flex-direction: row;
        }


        .image-wrapper img {
            height: 64vh;
            max-height: 80vh;
            width: 5062px;
            /* æˆ–è€… width: 100%; max-width: none; */
            max-width: none !important;
            display: inline-block;
        }

        .image-wrapper.dragging,
        #thumb-bar.dragging {
            cursor: grabbing;
            user-select: none;
        }

        .portrait-container {
            position: fixed;
            bottom: 25%;
            left: 3.5vw;
            width: 8vw;
            height: auto;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;

            pointer-events: none;
        }

        .portrait-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .portrait-container.hidden {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease;
        }

        .portrait-container.visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.5s ease;
        }

        #jpgname {
            margin-top: 1vh;
            font-size: 1.8vh;
            color: #333;
            background-color: rgba(255, 255, 255, 0.7);
            padding: 0.5vh 1vh;
            border-radius: 0.5vh;
            opacity: 0.64;
            transition: opacity 1s ease;
        }

        .scroll-menu {
            display: none;
            /* åˆå§‹éšè— */
            position: absolute;
            bottom: 100%;
            right: 0;
            background: #f9f9f9;
            border: 1px solid #ccc;
            animation: slideUp 0.3s ease-out forwards;
            z-index: 10;
            flex-direction: row;
            gap: 10px;
            padding: 10px;
        }


        .scroll-menu ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .scroll-menu li {
            padding: 8px 12px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
        }

        .scroll-menu li:hover {
            background-color: #e6f7ff;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>

<body>

    <div class="image-wrapper" id="image-wrapper">
        <img src="zitie2.jpg" alt="èƒŒæ™¯å›¾" />
    </div>

    <div id="box-preview"></div>
    <div class="scroll-container">
        <div class="scroll-line" id="scroll-line"></div>
    </div>
    <div class="preview" id="preview"></div>
    <div class="poem-line" id="poem-line"></div>
    <div id="poemT-line"></div>
    <div class="thumb-bar" id="thumb-bar"></div>
    <div class="ui-buttons">
        <div class="left-buttons" style="position: relative;">
            <button id="about-button">aj300542</button>
            <button id="pictureoff">è‹ä¸œå¡ç”»åƒ</button>
            <button id="longScrollBtn" onclick="toggleLongScrollList()">é•¿å¹…ä½œå“</button>
            <div id="LongScrollList" class="scroll-menu" style="right: 0;">
                <ul>
                    <li onclick="handleLongScrollSelect('index8')">ğŸŒ„é»„åº­åšæ¾é£é˜è¯—å·</li>
                    <li onclick="handleLongScrollSelect('indexA_01')">â›°ï¸ç±³èŠ¾èœ€ç´ å¸–</li>
                    <li onclick="handleLongScrollSelect('indexB')">ğŸª¿é¹¡é¸°é¢‚</li>
                    <li onclick="handleLongScrollSelect('indexU')">ğŸï¸èµµå­Ÿé «ä¹¦å‰åèµ¤å£èµ‹ä¹¦ç”»å·</li>
                    <li onclick="handleLongScrollSelect('indexC')">ğŸï¸èµµå­Ÿé «ä¹¦è¡Œä¹¦èµ¤å£äºŒèµ‹å†Œ</li>
                    <li onclick="handleLongScrollSelect('indexD')">ğŸŒ‹ç¦»éªšç»å†Œ</li>
                    <li onclick="handleLongScrollSelect('indexF')">ğŸ’—é‡‘ç®å¤è´¤è¯—æ„å›¾å·</li>
                    <li onclick="handleLongScrollSelect('indexG')">ğŸ¤²å¸é©¬å…‰æ‹œå·¦ä»†å°„å‘Šèº«å·</li>
                    <li onclick="handleLongScrollSelect('indexH')">ğŸ›«å®‹.è‹è½¼ä¹¦å½’å»æ¥è¾å·</li>
                    <li onclick="handleLongScrollSelect('indexI')">ğŸ§œâ€â™€ï¸èµµå­Ÿé «è¡Œä¹¦æ´›ç¥èµ‹å·</li>
                    <li onclick="handleLongScrollSelect('indexL')">ğŸŒŒæ¬§é˜³è¯¢ä¹¦ä»²å°¼æ¢¦å¥ å¸–</li>
                    <li onclick="handleLongScrollSelect('indexM')">ğŸª·ç‹ç¾²ä¹‹å¤§é“å¸–å·</li>
                    <li onclick="handleLongScrollSelect('indexR')">ğŸ’¡ç±³èŠ¾çœŸè¿¹</li>
                    <li onclick="handleLongScrollSelect('indexX')">ğŸï¸è‹è½¼å‰èµ¤å£èµ‹</li>
                    <li onclick="handleLongScrollSelect('indexZ')">ğŸª·é»„åº­åšä¹¦å¯’å±±å­åºå±…å£«è¯—å·</li>
                    <li onclick="handleLongScrollSelect('index01')">ğŸ«–æ¬§é˜³ä¿®é›†å¤å½•è·‹</li>
                    <li onclick="handleLongScrollSelect('index02')">ğŸª‘èµµå­Ÿé «ä¹¦é—²å±…èµ‹</li>
                    <li onclick="handleLongScrollSelect('index03')">ğŸï¸èµµå­Ÿé «ä¹¦è‹è½¼è¥¿æ¹–è¯—</li>
                    <li onclick="handleLongScrollSelect('index05')">ğŸ§¾é»„åº­åšä¹¦ç‹ç¾²ä¹‹è®ºä¹¦å†Œ</li>
            </div>
        </div>
        <div class="right-buttons" style="position: relative;">
            <button id="ccnote">ä¹¦æ³•å°çº¸æ¡</button>
            <button id="ShortScrollBtn" onclick="toggleShortScrollList()">çŸ­å¹…ä½œå“</button>
            <div id="ShortScrollList" class="scroll-menu" style="left: 0;">
                <ul>
                    <li onclick="handleShortScrollSelect('index08')">ğŸ‘´ æ¬§é˜³ä¿®å°ºç‰</li>
                    <li onclick="handleShortScrollSelect('index07')">ğŸ§”â€â™‚ï¸ ç±³èŠ¾å°ºç‰</li>
                    <li onclick="handleShortScrollSelect('index06')">ğŸ‘¨â€ğŸ¦³ è‹è½¼å°ºç‰</li>
                    <li onclick="handleShortScrollSelect('index04')">ğŸ§”â€â™‚ï¸ é»„åº­åšå°ºç‰</li>
                    <li onclick="handleShortScrollSelect('index0a')">ğŸ‘¨â€ğŸ¦± å‘¨è‡£æµæ°‘å›¾</li>
                    <li onclick="handleShortScrollSelect('indexY')">ğŸ“å®‹é«˜å®—èµå²³é£æ‰‹æ••</li>
                    <li onclick="handleShortScrollSelect('indexW')">ğŸèµµå­Ÿé «é›ªæ™´äº‘æ•£å¸–</li>
                    <li onclick="handleShortScrollSelect('indexV')">ğŸ‘€æœ±ç†¹è‰ä¹¦å…å¤«å¸–</li>
                    <li onclick="handleShortScrollSelect('indexT')">ğŸ§¾ç±³èŠ¾æ°´å¤´å°ºç‰˜</li>
                    <li onclick="handleShortScrollSelect('indexS')">ğŸª‘ç±³èŠ¾æ•°å•åæœ«å°ºç‰˜</li>
                    <li onclick="handleShortScrollSelect('indexQ')">ğŸ§‹ç±³èŠ¾é¹¤æ—ç”˜éœ²å°ºç‰˜</li>
                    <li onclick="handleShortScrollSelect('indexP')">ğŸš¢ç±³èŠ¾è‡´è‘›å›å¾·å¿±å°ºç‰˜</li>
                    <li onclick="handleShortScrollSelect('indexO')">ğŸ¦—ç±³èŠ¾æ•è—å¸–</li>
                    <li onclick="handleShortScrollSelect('indexN')">ğŸ’§ç±³èŠ¾ç”˜éœ²å¸–</li>
                    <li onclick="handleShortScrollSelect('indexE')">ğŸ’æ–‡å¾µæ˜å¿ƒç»</li>
                    <li onclick="handleShortScrollSelect('index10')">ğŸ˜­ç¥­ä¾„æ–‡ç¨¿</li>
                    <li onclick="handleShortScrollSelect('index9')">ğŸ˜¢ç‹ç£ä¼¯è¿œå¸–</li>
                    <li onclick="handleShortScrollSelect('index7')">ğŸŒ•ç‹çŒ®ä¹‹ä¸­ç§‹å¸–</li>
                    <li onclick="handleShortScrollSelect('index6')">â„ï¸å¿«é›ªæ—¶æ™´å¸–</li>
                    <li onclick="handleShortScrollSelect('index5')">ğŸŠå¹³å®‰ä½•å¦‚å¥‰æ©˜å¸–</li>
                    <li onclick="handleShortScrollSelect('index4')">ğŸŒç‹ç¾²ä¹‹è¿œå®¦å¸–</li>
                    <li onclick="handleShortScrollSelect('index3')">ğŸ¤åŒé’©å¡«å¢¨è¡Œç©°å¸–</li>

                </ul>
            </div>
            <button id="index2">é¢˜è‹è½¼å¯’é£Ÿå¸–è·‹</button>
            <button id="aj300">æèµ </button>
        </div>
    </div>
    <div class="portrait-container">
        <div style="display: flex; flex-direction: column; align-items: center;">
            <img id="portrait" src="portrait/0è‹ä¸œå¡.jpeg" alt="è‹ä¸œå¡ç”»åƒ" />
            <div id="jpgname">0è‹ä¸œå¡</div>
        </div>
    </div>
    <div class="play-buttons">
        <button id="demo-button">â–¶ï¸</button>
        <div id="speed-buttons">
            <button data-speed="slow">æ…¢</button>
            <button data-speed="fast">å¿«</button>
        </div>
        <button id="demo-status">â¹ï¸</button>
    </div>
    <script>
        const charsPath = "chars/";
        const imgPath = "chars/";
        const boxImgPath = "chars/";
        const txtPath = "chars/txt.json";
        const wufoPath = "chars/hanshi.json";
        const originalWidth = 9138;
        const originalHeight = 3163;
    </script>
    <script>
        const portraitImages = [
            "portrait/0è‹ä¸œå¡.jpeg",
            "portrait/1åŒ—å®‹æå…¬éºŸåˆ›ä½œçš„ã€Šæ‰¶æ–é†‰åå›¾ã€‹.jpeg",
            "portrait/2å…ƒä»£è¶™å­Ÿé «ã€Šè˜‡æ±å¡å°åƒã€‹.jpeg",
            "portrait/3æ˜ä»£é’±è°·ã€Šä¸œå¡ç¬ å±å›¾ã€‹.jpeg",
            "portrait/4æ¸…ä»£æé±“ã€Šä¸œå¡ç¬ å±å›¾ã€‹.jpeg",
            "portrait/5è¿‘ä»£å¼ å¤§åƒã€Šä¸œå¡å±…å£«ç¬ å±å›¾ã€‹.jpeg"
        ];

        const portrait = document.getElementById("portrait");
        const jpgname = document.getElementById("jpgname");
        let currentIndex = 0;

        function extractName(path) {
            const filename = path.split("/").pop(); // å–å‡ºæ–‡ä»¶åéƒ¨åˆ†
            return filename.replace(/\.[^/.]+$/, ""); // å»æ‰æ‰©å±•å
        }

        setInterval(() => {
            portrait.style.opacity = 0;
            jpgname.style.opacity = 0;

            setTimeout(() => {
                currentIndex = (currentIndex + 1) % portraitImages.length;
                const newSrc = portraitImages[currentIndex];
                portrait.src = newSrc;
                jpgname.textContent = extractName(newSrc);

                portrait.style.opacity = 1;
                jpgname.style.opacity = 1;
            }, 1500);
        }, 5000);


        // åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ–‡ä»¶å
        jpgname.textContent = extractName(portraitImages[0]);
    </script>
    <script>
        const portraitContainer = document.querySelector(".portrait-container");
        const pictureToggleButton = document.getElementById("pictureoff");

        let portraitVisible = true; // é»˜è®¤æ˜¾ç¤º

        pictureToggleButton.addEventListener("click", () => {
            portraitVisible = !portraitVisible;

            if (portraitVisible) {
                portraitContainer.style.display = "flex";
                pictureToggleButton.textContent = "è‹ä¸œå¡ç”»åƒ";
            } else {
                portraitContainer.style.display = "none";
                pictureToggleButton.textContent = "å¼€å¯ç”»åƒ";
            }
        });

    </script>
    <script>
        const img = document.querySelector(".image-wrapper img");
        img.style.width = "5062px";

        window.addEventListener("load", () => {
            const wrapper = document.querySelector(".image-wrapper");
            const img = wrapper.querySelector("img");

            const scrollToRight = () => {
                wrapper.scrollLeft = wrapper.scrollWidth;
                console.log("Scrolled to right:", wrapper.scrollLeft);
            };

            if (img.complete) {
                scrollToRight();
            } else {
                img.addEventListener("load", scrollToRight);
            }
        });
    </script>
    <script>
        function toggleLongScrollList() {
            // è‡ªåŠ¨å…³é—­ç”»åƒ
            portraitContainer.style.display = "none";
            portraitVisible = false;
            pictureToggleButton.textContent = "å¼€å¯ç”»åƒ";

            const list = document.getElementById("LongScrollList");
            const allItems = Array.from(list.querySelectorAll("ul li"));
            const maxPerColumn = 10;

            if (list.dataset.processed !== "true") {
                const columns = [];
                for (let i = 0; i < allItems.length; i += maxPerColumn) {
                    const column = document.createElement("div");
                    column.className = "scroll-column";
                    const ul = document.createElement("ul");
                    allItems.slice(i, i + maxPerColumn).forEach(item => ul.appendChild(item));
                    column.appendChild(ul);
                    columns.push(column);
                }
                list.innerHTML = ""; // æ¸…ç©ºåŸå§‹å†…å®¹
                columns.forEach(col => list.appendChild(col));
                list.dataset.processed = "true"; // é˜²æ­¢é‡å¤å¤„ç†
            }

            list.style.display = list.style.display === "flex" ? "none" : "flex";
        }


        function handleLongScrollSelect(id) {
            const urlMap = {
                index8: "index8.html",
                indexA_01: "indexA_01.html",
                indexB: "indexB.html",
                indexC: "indexC.html",
                indexD: "indexD.html",
                indexF: "indexF.html",
                indexG: "indexG.html",
                indexH: "indexH.html",
                indexI: "indexI.html",
                indexL: "indexL.html",
                indexM: "indexM.html",
                indexR: "indexR.html",
                indexU: "indexU.html",
                indexX: "indexX.html",
                indexZ: "indexZ.html",
                index01: "index01_oyxjg.html",
                index02: "index02_xianju.html",
                index03: "index03_xihu.html",
                index05: "index05_htjls.html",
            };

            if (urlMap[id]) {
                window.location.href = urlMap[id];
            }

            document.getElementById("longScrollList").style.display = "none";
        }
        function toggleShortScrollList() {
            // éšè—é•¿åˆ—è¡¨
            document.getElementById("LongScrollList").style.display = "none";

            const list = document.getElementById("ShortScrollList");
            const allItems = Array.from(list.querySelectorAll("ul li"));
            const maxPerColumn = 12;

            if (list.dataset.processed !== "true") {
                const columns = [];
                for (let i = 0; i < allItems.length; i += maxPerColumn) {
                    const column = document.createElement("div");
                    column.className = "scroll-column";
                    const ul = document.createElement("ul");
                    allItems.slice(i, i + maxPerColumn).forEach(item => ul.appendChild(item));
                    column.appendChild(ul);
                    columns.push(column);
                }
                list.innerHTML = ""; // æ¸…ç©ºåŸå§‹å†…å®¹
                columns.forEach(col => list.appendChild(col));
                list.dataset.processed = "true"; // é˜²æ­¢é‡å¤å¤„ç†
            }

            list.style.display = list.style.display === "flex" ? "none" : "flex";
        }

        function handleShortScrollSelect(id) {
            const urlMap = {
                index2: "index2.html",
                index3: "index3.html",
                index4: "index4.html",
                index5: "index5.html",
                index6: "index6.html",
                index7: "index7.html",
                index9: "index9.html",
                index10: "index10.html",
                indexE: "indexE.html",
                indexN: "indexN.html",
                indexO: "indexO.html",
                indexP: "indexP.html",
                indexQ: "indexQ.html",
                indexS: "indexS.html",
                indexT: "indexT.html",
                indexV: "indexV.html",
                indexW: "indexW.html",
                indexY: "indexY.html",
                index0a: "index0a-liumin.html",
                index04: "index04_htj.html",
                index06: "index06_ss.html",
                index07: "index07_mifu.html",
                index08: "index08_oyx01.html",
            };

            if (urlMap[id]) {
                window.location.href = urlMap[id];
            }

            document.getElementById("ShortScrollList").style.display = "none";
        }


        document.getElementById("ccnote").addEventListener("click", () => {
            window.open("https://aj300542.github.io/cc", "_blank");
        });
        document.getElementById("aj300").addEventListener("click", () => {
            window.open("https://aj300542.github.io/download", "_blank");
        });

    </script>

    <script src="js/playUI.js"></script>
    <script src="js/letter.js"></script>
    <script src="js/button.js"></script>
    <script src="js/txtlong.js"></script>
    <script src="js/chars.js"></script>
    <script src="js/control.js"></script>
    <script>
        const CHARS_DIR = './chars/';
    </script>
    <script type="importmap">
    {
    "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js"
    }
    }
    </script>

    <script type="module" src="./js/modelLoader.js"></script>


</body>

</html>